# <center> lua学习笔记

# lua语言

## all in table
- table是lua的一个重要的数据类型。
- table是数组和哈希表的混合体，可与json对比方便理解
- _G全局变量就是一个table，_G存储大量系统功能（例如string，table等）
- printable.lua用于打印table

## 全局变量G
```
> printable = require('printable')
> printable(_G)
------------------------ printTable start ------------------------
local tableValue = {
    next = function: 0x104ec5b64,
    math = {
        log = function: 0x104ec9ba4,
        log10 = function: 0x104eca114,
        maxinteger = 9223372036854775807,
        tointeger = function: 0x104ec99c8,
        rad = function: 0x104ec9e3c,
        sqrt = function: 0x104ec9eac,
        sinh = function: 0x104ec9fbc,
        modf = function: 0x104ec9db0,
        frexp = function: 0x104eca078,
        cos = function: 0x104ec9924,
        pow = function: 0x104eca024,
        exp = function: 0x104ec9994,
        random = function: 0x600000804930,
        max = function: 0x104ec9c58,
        pi = 3.1415926535898,
        floor = function: 0x104ec9a28,
        ldexp = function: 0x104eca0c4,
        abs = function: 0x104ec97a8,
        cosh = function: 0x104ec9f88,
        min = function: 0x104ec9d04,
        type = function: 0x104ec9f14,
        fmod = function: 0x104ec9a7c,
        sin = function: 0x104ec9e78,
        ult = function: 0x104ec9b5c,
        huge = inf,
        asin = function: 0x104ec9844,
        deg = function: 0x104ec9958,
        ceil = function: 0x104ec98d0,
        tanh = function: 0x104ec9ff0,
        mininteger = -9223372036854775808,
        tan = function: 0x104ec9ee0,
        acos = function: 0x104ec9810,
        randomseed = function: 0x600000804960,
        atan2 = function: 0x104ec9878,
        atan = function: 0x104ec9878,
    },
    printable = function: 0x60000080c330,
    warn = function: 0x104ec5d9c,
    package = {
        searchers = {
            [1] = function: 0x600000804540,
            [2] = function: 0x600000804570,
            [3] = function: 0x6000008045a0,
            [4] = function: 0x6000008045d0,
        },
        path = "/opt/homebrew/share/lua/5.4/?.lua;/opt/homebrew/share/lua/5.4/?/init.lua;/opt/homebrew/lib/lua/5.4/?.lua;/opt/homebrew/lib/lua/5.4/?/init.lua;./?.lua;./?/init.lua",
        config = "/
;
?
!
-
",
        loaded = {
            _G = {检测到循环引用!},
            os = {
                time = function: 0x104ecba08,
                clock = function: 0x104ecb4cc,
                tmpname = function: 0x104ecbb90,
                setlocale = function: 0x104ecb998,
                remove = function: 0x104ecb900,
                getenv = function: 0x104ecb8c4,
                date = function: 0x104ecb508,
                rename = function: 0x104ecb940,
                difftime = function: 0x104ecb798,
                exit = function: 0x104ecb844,
                execute = function: 0x104ecb7e4,
            },
            coroutine = {
                create = function: 0x104ec6714,
                status = function: 0x104ec6820,
                yield = function: 0x104ec689c,
                wrap = function: 0x104ec6864,
                close = function: 0x104ec691c,
                isyieldable = function: 0x104ec68cc,
                resume = function: 0x104ec6768,
                running = function: 0x104ec67f0,
            },
            printable = function: 0x60000080c330,
            string = {
                char = function: 0x104ecc068,
                rep = function: 0x104ecd050,
                pack = function: 0x104ecd3fc,
                gsub = function: 0x104eccaec,
                len = function: 0x104eccf50,
                lower = function: 0x104eccf90,
                upper = function: 0x104ecd344,
                find = function: 0x104ecc22c,
                unpack = function: 0x104ecd9e4,
                dump = function: 0x104ecc168,
                reverse = function: 0x104ecd1c0,
                gmatch = function: 0x104ecc9fc,
                packsize = function: 0x104ecd8ec,
                sub = function: 0x104ecd270,
                match = function: 0x104ecd048,
                format = function: 0x104ecc234,
                byte = function: 0x104ecbf48,
            },
            debug = {
                getupvalue = function: 0x104ec75e0,
                getmetatable = function: 0x104ec75a0,
                gethook = function: 0x104ec6ee0,
                setuservalue = function: 0x104ec76e4,
                getinfo = function: 0x104ec7038,
                getlocal = function: 0x104ec7424,
                getregistry = function: 0x104ec7580,
                setupvalue = function: 0x104ec7aa0,
                traceback = function: 0x104ec7acc,
                setmetatable = function: 0x104ec7a40,
                sethook = function: 0x104ec7758,
                getuservalue = function: 0x104ec6e58,
                upvalueid = function: 0x104ec7698,
                upvaluejoin = function: 0x104ec75e8,
                debug = function: 0x104ec6cc8,
                setlocal = function: 0x104ec7910,
                setcstacklimit = function: 0x104ec7b7c,
            },
            utf8 = {
                codes = function: 0x104ed0884,
                codepoint = function: 0x104ed04c8,
                offset = function: 0x104ed02f8,
                len = function: 0x104ed0714,
                charpattern = "[",
                char = function: 0x104ed0658,
            },
            io = {
                read = function: 0x104ec847c,
                stdin = file (0x20e8cd548),
                flush = function: 0x104ec80d0,
                output = function: 0x104ec8364,
                close = function: 0x104ec8054,
                input = function: 0x104ec810c,
                stderr = file (0x20e8cd678),
                tmpfile = function: 0x104ec84b0,
                stdout = file (0x20e8cd5e0),
                write = function: 0x104ec8594,
                type = function: 0x104ec8524,
                lines = function: 0x104ec8134,
                open = function: 0x104ec8238,
                popen = function: 0x104ec838c,
            },
            package = {检测到循环引用!},
            table = {
                move = function: 0x104ecf9fc,
                remove = function: 0x104ecf918,
                sort = function: 0x104ecfbac,
                pack = function: 0x104ecf798,
                concat = function: 0x104ecf570,
                unpack = function: 0x104ecf82c,
                insert = function: 0x104ecf694,
            },
            math = {
                log = function: 0x104ec9ba4,
                log10 = function: 0x104eca114,
                maxinteger = 9223372036854775807,
                tointeger = function: 0x104ec99c8,
                rad = function: 0x104ec9e3c,
                sqrt = function: 0x104ec9eac,
                sinh = function: 0x104ec9fbc,
                modf = function: 0x104ec9db0,
                frexp = function: 0x104eca078,
                cos = function: 0x104ec9924,
                pow = function: 0x104eca024,
                exp = function: 0x104ec9994,
                random = function: 0x600000804930,
                max = function: 0x104ec9c58,
                pi = 3.1415926535898,
                floor = function: 0x104ec9a28,
                ldexp = function: 0x104eca0c4,
                abs = function: 0x104ec97a8,
                cosh = function: 0x104ec9f88,
                min = function: 0x104ec9d04,
                type = function: 0x104ec9f14,
                fmod = function: 0x104ec9a7c,
                sin = function: 0x104ec9e78,
                ult = function: 0x104ec9b5c,
                huge = inf,
                asin = function: 0x104ec9844,
                deg = function: 0x104ec9958,
                ceil = function: 0x104ec98d0,
                tanh = function: 0x104ec9ff0,
                mininteger = -9223372036854775808,
                tan = function: 0x104ec9ee0,
                acos = function: 0x104ec9810,
                randomseed = function: 0x600000804960,
                atan2 = function: 0x104ec9878,
                atan = function: 0x104ec9878,
            },
        },
        searchpath = function: 0x104eca954,
        loadlib = function: 0x104eca8b0,
        preload = {
        },
        cpath = "/opt/homebrew/lib/lua/5.4/?.so;/opt/homebrew/lib/lua/5.4/loadall.so;./?.so",
    },
    os = {
        time = function: 0x104ecba08,
        clock = function: 0x104ecb4cc,
        tmpname = function: 0x104ecbb90,
        setlocale = function: 0x104ecb998,
        remove = function: 0x104ecb900,
        getenv = function: 0x104ecb8c4,
        date = function: 0x104ecb508,
        rename = function: 0x104ecb940,
        difftime = function: 0x104ecb798,
        exit = function: 0x104ecb844,
        execute = function: 0x104ecb7e4,
    },
    assert = function: 0x104ec55d4,
    require = function: 0x6000008044b0,
    io = {
        read = function: 0x104ec847c,
        stdin = file (0x20e8cd548),
        flush = function: 0x104ec80d0,
        output = function: 0x104ec8364,
        close = function: 0x104ec8054,
        input = function: 0x104ec810c,
        stderr = file (0x20e8cd678),
        tmpfile = function: 0x104ec84b0,
        stdout = file (0x20e8cd5e0),
        write = function: 0x104ec8594,
        type = function: 0x104ec8524,
        lines = function: 0x104ec8134,
        open = function: 0x104ec8238,
        popen = function: 0x104ec838c,
    },
    print = function: 0x104ec5cc4,
    ipairs = function: 0x104ec5984,
    loadfile = function: 0x104ec59d8,
    rawget = function: 0x104ec5f10,
    _VERSION = "Lua 5.4",
    load = function: 0x104ec5a5c,
    pcall = function: 0x104ec5c50,
    error = function: 0x104ec58b0,
    type = function: 0x104ec6394,
    dofile = function: 0x104ec5828,
    rawset = function: 0x104ec5f60,
    utf8 = {
        codes = function: 0x104ed0884,
        codepoint = function: 0x104ed04c8,
        offset = function: 0x104ed02f8,
        len = function: 0x104ed0714,
        charpattern = "",
        char = function: 0x104ed0658,
    },
    setmetatable = function: 0x104ec6078,
    debug = {
        getupvalue = function: 0x104ec75e0,
        getmetatable = function: 0x104ec75a0,
        gethook = function: 0x104ec6ee0,
        setuservalue = function: 0x104ec76e4,
        getinfo = function: 0x104ec7038,
        getlocal = function: 0x104ec7424,
        getregistry = function: 0x104ec7580,
        setupvalue = function: 0x104ec7aa0,
        traceback = function: 0x104ec7acc,
        setmetatable = function: 0x104ec7a40,
        sethook = function: 0x104ec7758,
        getuservalue = function: 0x104ec6e58,
        upvalueid = function: 0x104ec7698,
        upvaluejoin = function: 0x104ec75e8,
        debug = function: 0x104ec6cc8,
        setlocal = function: 0x104ec7910,
        setcstacklimit = function: 0x104ec7b7c,
    },
    arg = {
        [0] = "lua",
    },
    coroutine = {
        create = function: 0x104ec6714,
        status = function: 0x104ec6820,
        yield = function: 0x104ec689c,
        wrap = function: 0x104ec6864,
        close = function: 0x104ec691c,
        isyieldable = function: 0x104ec68cc,
        resume = function: 0x104ec6768,
        running = function: 0x104ec67f0,
    },
    rawlen = function: 0x104ec5eac,
    xpcall = function: 0x104ec63f8,
    pairs = function: 0x104ec5bbc,
    getmetatable = function: 0x104ec592c,
    string = {
        char = function: 0x104ecc068,
        rep = function: 0x104ecd050,
        pack = function: 0x104ecd3fc,
        gsub = function: 0x104eccaec,
        len = function: 0x104eccf50,
        lower = function: 0x104eccf90,
        upper = function: 0x104ecd344,
        find = function: 0x104ecc22c,
        unpack = function: 0x104ecd9e4,
        dump = function: 0x104ecc168,
        reverse = function: 0x104ecd1c0,
        gmatch = function: 0x104ecc9fc,
        packsize = function: 0x104ecd8ec,
        sub = function: 0x104ecd270,
        match = function: 0x104ecd048,
        format = function: 0x104ecc234,
        byte = function: 0x104ecbf48,
    },
    tonumber = function: 0x104ec611c,
    select = function: 0x104ec5fbc,
    tostring = function: 0x104ec635c,
    collectgarbage = function: 0x104ec5654,
    table = {
        move = function: 0x104ecf9fc,
        remove = function: 0x104ecf918,
        sort = function: 0x104ecfbac,
        pack = function: 0x104ecf798,
        concat = function: 0x104ecf570,
        unpack = function: 0x104ecf82c,
        insert = function: 0x104ecf694,
    },
    _G = {检测到循环引用!},
    rawequal = function: 0x104ec5e5c,
}
------------------------- printTable end -------------------------
```

## string
lua语言包含一个比较简单的字符串/正则处理函数库。
- 某些场景下使用string库处理字符串/正则非常方便
- 某些场景下则非常麻烦

## 其他
- lua不支持continue关键字
- lua 5.2以下版本不支持goto
- luasocket对lua5.4不太支持，需到https://gitee.com/flymanthl/luasocket-for-lua5.4 下载自行编译

# 调试
- vscode + LuaPanda 用来调试lua
- vscode自行安装的LuaPanda.lua文件有BUG，需到官网上下载最新的文件，覆盖到vscode目录下


